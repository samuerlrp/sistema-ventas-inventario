<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Ventas e Inventario</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <h1>üîê Iniciar Sesi√≥n</h1>
            <form id="formLogin">
                <div class="form-group">
                    <label>Usuario</label>
                    <input type="text" id="loginUsuario" required placeholder="Ingresa tu usuario" autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label>Contrase√±a</label>
                    <input type="password" id="loginPassword" required placeholder="Ingresa tu contrase√±a" autocomplete="current-password">
                </div>
                
                <button type="submit" class="btn btn-primary">Entrar</button>
                <p class="hint">üí° Usuario: MARROCO | Contrase√±a: 172008</p>
            </form>
        </div>
    </div>

    <!-- Sistema Principal -->
    <div id="mainSystem" class="container" style="display: none;">
        <div class="header-bar">
            <h1>üõí Sistema de Ventas e Inventario</h1>
            <button class="btn btn-danger" onclick="cerrarSesion()">üö™ Cerrar Sesi√≥n</button>
        </div>

        <!-- Alertas de Stock Bajo -->
        <div id="alertasStock" class="alertas-container" style="display: none;">
            <div class="alerta-stock">
                <span class="alerta-icono">‚ö†Ô∏è</span>
                <span class="alerta-texto" id="alertaTexto"></span>
                <button class="btn-cerrar-alerta" onclick="cerrarAlerta()">‚úï</button>
            </div>
        </div>
        
        <!-- Pesta√±as de navegaci√≥n -->
        <div class="tabs">
            <button class="tab active" data-tab="inventario">üì¶ Inventario</button>
            <button class="tab" data-tab="ventas">üí∞ Ventas</button>
            <button class="tab" data-tab="estadisticas">üìä Estad√≠sticas</button>
            <button class="tab" data-tab="reportes">üìã Reportes</button>
            <button class="tab" data-tab="graficas">üìà Gr√°ficas</button>
        </div>

        <!-- Secci√≥n de Inventario -->
        <div id="inventario" class="section active">
            <h2>Agregar Producto</h2>
            <form id="formProducto">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre del Producto *</label>
                        <input type="text" id="nombre" required placeholder="Ej: Laptop HP">
                    </div>
                    
                    <div class="form-group">
                        <label>Categor√≠a *</label>
                        <select id="categoria" required>
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Electr√≥nica">Electr√≥nica</option>
                            <option value="Ropa">Ropa</option>
                            <option value="Alimentos">Alimentos</option>
                            <option value="Hogar">Hogar</option>
                            <option value="Deportes">Deportes</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Precio *</label>
                        <input type="number" id="precio" step="0.01" required placeholder="0.00">
                    </div>
                    
                    <div class="form-group">
                        <label>Cantidad *</label>
                        <input type="number" id="cantidad" required placeholder="0">
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">‚ûï Agregar Producto</button>
            </form>

            <div class="inventario-header">
                <h2>Lista de Productos</h2>
                <div class="filtros-container">
                    <input type="text" id="buscarProducto" placeholder="üîç Buscar producto..." class="input-busqueda">
                    <select id="filtroCategoria" class="select-filtro">
                        <option value="">Todas las categor√≠as</option>
                        <option value="Electr√≥nica">Electr√≥nica</option>
                        <option value="Ropa">Ropa</option>
                        <option value="Alimentos">Alimentos</option>
                        <option value="Hogar">Hogar</option>
                        <option value="Deportes">Deportes</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <select id="filtroStock" class="select-filtro">
                        <option value="">Todo el stock</option>
                        <option value="bajo">Stock bajo (‚â§5)</option>
                        <option value="disponible">Con stock (>5)</option>
                        <option value="agotado">Agotado (0)</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categor√≠a</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Valor Total</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaProductos">
                        <tr>
                            <td colspan="6" class="empty-state">No hay productos en el inventario</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Secci√≥n de Ventas -->
        <div id="ventas" class="section">
            <h2>Registrar Venta</h2>
            <form id="formVenta">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Producto *</label>
                        <select id="productoVenta" required>
                            <option value="">Seleccionar producto</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Cantidad *</label>
                        <input type="number" id="cantidadVenta" min="1" required placeholder="0">
                    </div>
                    
                    <div class="form-group">
                        <label>Precio Unitario</label>
                        <input type="number" id="precioVenta" step="0.01" readonly>
                    </div>

                    <div class="form-group">
                        <label>Total</label>
                        <input type="number" id="totalVenta" step="0.01" readonly placeholder="0.00">
                    </div>
                </div>
                
                <div class="botones-venta">
                    <button type="submit" class="btn btn-success">‚úÖ Registrar Venta</button>
                    <button type="button" class="btn btn-primary" onclick="imprimirTicket()" id="btnImprimir" style="display: none;">üñ®Ô∏è Imprimir Ticket</button>
                </div>
            </form>

            <div class="ventas-header">
                <h2>Historial de Ventas</h2>
                <div class="filtros-container">
                    <input type="text" id="buscarVenta" placeholder="üîç Buscar en ventas..." class="input-busqueda">
                    <input type="date" id="filtroFecha" class="select-filtro">
                </div>
            </div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Precio Unitario</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody id="tablaVentas">
                        <tr>
                            <td colspan="5" class="empty-state">No hay ventas registradas</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Secci√≥n de Estad√≠sticas -->
        <div id="estadisticas" class="section">
            <h2>Estad√≠sticas del Negocio</h2>
            <div class="stats">
                <div class="stat-card">
                    <h3>üì¶ Total Productos</h3>
                    <div class="number" id="totalProductos">0</div>
                </div>
                
                <div class="stat-card">
                    <h3>üíµ Valor Inventario</h3>
                    <div class="number" id="valorInventario">$0.00</div>
                </div>
                
                <div class="stat-card">
                    <h3>üí∞ Total Ventas</h3>
                    <div class="number" id="totalVentas">$0.00</div>
                </div>
                
                <div class="stat-card">
                    <h3>üõçÔ∏è Cantidad Ventas</h3>
                    <div class="number" id="cantidadVentas">0</div>
                </div>
            </div>

            <h2 style="margin-top: 30px;">‚ö†Ô∏è Productos con Stock Bajo</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categor√≠a</th>
                            <th>Cantidad Restante</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="tablaStockBajo">
                        <tr>
                            <td colspan="4" class="empty-state">‚úÖ Todos los productos tienen stock suficiente</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Secci√≥n de Reportes -->
        <div id="reportes" class="section">
            <h2>üìä Generar Reportes</h2>
            
            <div class="reportes-container">
                <div class="filtros-reporte">
                    <h3>Filtros de Reporte</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Fecha Desde</label>
                            <input type="date" id="fechaDesde">
                        </div>
                        
                        <div class="form-group">
                            <label>Fecha Hasta</label>
                            <input type="date" id="fechaHasta">
                        </div>
                        
                        <div class="form-group">
                            <label>Producto (opcional)</label>
                            <select id="filtroProductoReporte">
                                <option value="">Todos los productos</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button class="btn btn-primary" onclick="aplicarFiltrosReporte()">üîç Filtrar</button>
                        </div>
                    </div>
                </div>
                
                <div class="resultados-reporte">
                    <div class="reporte-header">
                        <h3>Resultados del Reporte</h3>
                        <div class="botones-exportar">
                            <button class="btn btn-success" onclick="exportarExcel()">üìó Exportar a Excel</button>
                            <button class="btn btn-danger" onclick="exportarPDF()">üìï Exportar a PDF</button>
                        </div>
                    </div>
                    
                    <div class="reporte-stats">
                        <div class="stat-mini">
                            <span class="stat-label">Total Ventas:</span>
                            <span class="stat-valor" id="reporteTotalVentas">$0.00</span>
                        </div>
                        <div class="stat-mini">
                            <span class="stat-label">Productos Vendidos:</span>
                            <span class="stat-valor" id="reporteCantidadProductos">0</span>
                        </div>
                        <div class="stat-mini">
                            <span class="stat-label">Transacciones:</span>
                            <span class="stat-valor" id="reporteNumTransacciones">0</span>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="tablaReporte">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Fecha</th>
                                    <th>Producto</th>
                                    <th>Precio Unit.</th>
                                    <th>Cantidad</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyReporte">
                                <tr>
                                    <td colspan="6" class="empty-state">Selecciona los filtros y presiona "Filtrar"</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Secci√≥n de Gr√°ficas -->
        <div id="graficas" class="section">
            <h2>üìà An√°lisis Visual de Ventas</h2>
            
            <div class="graficas-grid">
                <div class="grafica-container">
                    <h3>Ventas por D√≠a</h3>
                    <canvas id="graficaVentasDiarias"></canvas>
                </div>
                
                <div class="grafica-container">
                    <h3>Productos M√°s Vendidos</h3>
                    <canvas id="graficaProductos"></canvas>
                </div>
                
                <div class="grafica-container">
                    <h3>Ventas por Categor√≠a</h3>
                    <canvas id="graficaCategorias"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket para imprimir (oculto) -->
    <div id="ticketImprimir" style="display: none;">
        <div class="ticket">
            <h2 style="text-align: center;">üõí TICKET DE VENTA</h2>
            <div style="text-align: center; border-bottom: 2px dashed #000; padding-bottom: 10px; margin-bottom: 10px;">
                <p><strong>Mi Tienda</strong></p>
                <p style="font-size: 12px;">Sistema de Inventario</p>
            </div>
            <p><strong>Fecha:</strong> <span id="ticketFecha"></span></p>
            <p><strong>Producto:</strong> <span id="ticketProducto"></span></p>
            <p><strong>Cantidad:</strong> <span id="ticketCantidad"></span></p>
            <p><strong>Precio Unit.:</strong> $<span id="ticketPrecio"></span></p>
            <div style="border-top: 2px dashed #000; margin-top: 10px; padding-top: 10px;">
                <p style="font-size: 18px;"><strong>TOTAL: $<span id="ticketTotal"></span></strong></p>
            </div>
            <p style="text-align: center; font-size: 12px; margin-top: 20px;">¬°Gracias por su compra!</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
